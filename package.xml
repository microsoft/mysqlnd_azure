<?xml version="1.0" encoding="UTF-8"?>
<package packagerversion="1.10.8" version="2.0" xmlns="http://pear.php.net/dtd/package-2.0" xmlns:tasks="http://pear.php.net/dtd/tasks-1.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://pear.php.net/dtd/tasks-1.0 http://pear.php.net/dtd/tasks-1.0.xsd http://pear.php.net/dtd/package-2.0 http://pear.php.net/dtd/package-2.0.xsd">
 <name>mysqlnd_azure</name>
 <channel>pecl.php.net</channel>
 <summary>mysqlnd_azure - a redirection plugin for mysqlnd</summary>
 <description>mysqlnd extension for azure</description>
 <lead>
  <name>Hang Zhang</name>
  <user>ymr674</user>
  <email>haz@microsoft.com</email>
  <active>yes</active>
 </lead>
 <lead>
  <name>Qianqian Bu</name>
  <user>bqq</user>
  <email>Qianqian.Bu@microsoft.com</email>
  <active>yes</active>
 </lead>
 <date>2020-02-14</date>
 <time>16:00:13</time>
 <version>
  <release>1.1.1</release>
  <api>1.1.1</api>
 </version>
 <stability>
  <release>stable</release>
  <api>stable</api>
 </stability>
 <license uri="http://www.php.net/license">PHP License</license>
 <notes>
- 1. Rename option mysqlnd_azure.enabled to mysqlnd_azure.enableRedirect.
- 2. Add a new option choice "preferred".
- 3. When enableRedirect is "on", ssl is off, no connection will be made, return error "mysqlnd_azure.enableRedirect is on, but SSL option is not set in connection string. Redirection is only possible with SSL."
- 4. When enableRedirect is "on", but on server side redirection is not available, abort the first connection and return error "Connection aborted because redirection is not enabled on the MySQL server or the network package doesn't meet meet redirection protocol."
- 5. When enableRedirect is "on" and server supports redirection, but the redirected connection failed for any reason, also abort the first proxy connection. Return the error of the redirected connection.
- 6. When enableRedirect is "preferred", it will use redirection if possible. 
     If connection does not use SSL, or server does not support redirection, or redirected connection fails to connect for any non-fatal reason while the proxy connection is still a valid one, it will fallback to the first proxy connection.
 </notes>
 <contents>
  <dir name="/">
   <file md5sum="6d473de497966da011b1b1a60b2285c8" name="config.m4" role="src" />
   <file md5sum="5afc590b5c2da3920337849073de0c4b" name="config.w32" role="src" />
   <file md5sum="99748c589404d9cb16a90c4110fd4f84" name="mysqlnd_azure.c" role="src" />
   <file md5sum="ae4debacefd4d0f7d80db5f9e298d913" name="php_mysqlnd_azure.c" role="src" />
   <file md5sum="81379d753b8268922e3e3dd8c11c803c" name="redirect_cache.c" role="src" />
   <file md5sum="f6ce2d3ccfaa1d8e53196f9df9043b35" name="mysqlnd_azure.h" role="src" />
   <file md5sum="207e117afe26f28a75d83776e88d7ee0" name="php_mysqlnd_azure.h" role="src" />
   <file md5sum="1d60dd2a72d2d9a325e68070b7fd0fbf" name="tests/mysqli_azure_redirection_on.phpt" role="test" />
   <file md5sum="a678a17b08f337292c0471b26be405f5" name="tests/mysqli_azure_redirection_off.phpt" role="test" />
   <file md5sum="a678a17b08f337292c0471b26be405f5" name="tests/mysqli_azure_redirection_preferred.phpt" role="test" />
   <file md5sum="a678a17b08f337292c0471b26be405f5" name="tests/mysqli_azure_option_test.phpt" role="test" />   
   <file md5sum="271878ad9afcd0f4304529ff9522e034" name="tests/connect.inc" role="test" />
   <file md5sum="d621e9a3ad808225480ee11b361338ad" name="tests/skipif.inc" role="test" />
   <file md5sum="841204de228db4ea0150bf7289956163" name="tests/skipif_mysqli.inc" role="test" />
   <file md5sum="c5ac2a622a1ad2ecbb1a80fddb1ea774" name="tests/server.inc" role="test" />
   <file md5sum="ee9b26d984fe6024f9ee9d6c162b3a1d" name="tests/skipif_pdo.inc" role="test" />
   <file md5sum="9ecaa780d20d362faeae7df543a0d38f" name="tests/skipif_server.inc" role="test" />
   <file md5sum="280ebbbe7bfbee3f9f50f3872ce58375" name="tests/server_basic_mysqli.phpt" role="test" />
   <file md5sum="d6e763bef7cb06cd23db8b6416e50701" name="tests/server_basic_mysqli_testcase.php" role="test" />
   <file md5sum="02d8e393486d59fb84866c03996489d1" name="tests/server_basic_pdo.phpt" role="test" />
   <file md5sum="2b98d0e792fa35bb67fa7f196f05f7ca" name="tests/server_basic_pdo_testcase.php" role="test" />
   <file md5sum="a898ba9138cb8ebe9751d0629ebdcd87" name="LICENSE.txt" role="doc" />
   <file md5sum="c3de6c763e44bebab12cfa0d85c37fa0" name="Notes.txt" role="doc" />
   <file md5sum="2e6b1acdbd3ea3056847cbd5d8042153" name="CREDITS" role="doc" />
   <file md5sum="7d3659eb516c6d8c7c4c53aaae9bae3b" name="README.md" role="doc" />
  </dir>
 </contents>
 <dependencies>
  <required>
   <php>
    <min>7.2.15</min>
    <exclude>7.3.0</exclude>
    <exclude>7.3.1</exclude>
   </php>
   <pearinstaller>
    <min>1.10</min>
   </pearinstaller>
  </required>
 </dependencies>
 <providesextension>mysqlnd_azure</providesextension>
 <extsrcrelease />
 <changelog>
    <release>
     <version>
     <release>1.1.1</release>
     <api>1.1.1</api>
     </version>
     <stability>
      <release>stable</release>
      <api>stable</api>
     </stability>
     <date>2020-05-13</date>
     <license uri="http://www.php.net/license">PHP License</license>
     <notes>
- 1. New connection attribute "_extension_version", indicate the mysqlnd_azure extension build version.
- 2. Fix memory collect mnd_ prefix alloc crash and add a test case for enable mysqlnd.collect_memory_statistics.
     </notes>
    </release>
    <release>
     <version>
     <release>1.1.0</release>
     <api>1.1.0</api>
     </version>
     <stability>
      <release>beta</release>
      <api>beta</api>
     </stability>
     <date>2020-02-14</date>
     <license uri="http://www.php.net/license">PHP License</license>
     <notes>
- 1. Rename option mysqlnd_azure.enabled to mysqlnd_azure.enableRedirect, and add a new option value "preferred".
- 2. When enableRedirect is "on", ssl is off, no connection will be made, return error "mysqlnd_azure.enableRedirect is on, but SSL option is not set in connection string. Redirection is only possible with SSL."
- 3. When enableRedirect is "on", but on server side redirection is not available, abort the first connection and return error "Connection aborted because redirection is not enabled on the MySQL server or the network package doesn't meet meet redirection protocol."
- 4. When enableRedirect is "on" and server supports redirection, but the redirected connection failed for any reason, also abort the first proxy connection. Return the error of the redirected connection.
- 5. A new option for mysqlnd_azure.enableRedirect is introduced with name "preferred". When enableRedirect is "preferred", it will use redirection if possible. 
     If connection does not use SSL, or server does not support redirection, or redirected connection fails to connect for any non-fatal reason while the proxy connection is still a valid one, it will fallback to the first proxy connection.
     </notes>
    </release>
    <release>
     <version>
     <release>1.0.3</release>
     <api>1.0.3</api>
     </version>
     <stability>
      <release>stable</release>
      <api>stable</api>
     </stability>
     <date>2020-02-10</date>
     <license uri="http://www.php.net/license">PHP License</license>
     <notes>
Remove the use of is_using_redirect flag. More strict validation and test cases with php built-in web server.
     </notes>
    </release>
    <release>
     <version>
     <release>1.0.3RC</release>
     <api>1.0.3RC</api>
     </version>
     <stability>
      <release>beta</release>
      <api>beta</api>
     </stability>
     <date>2020-01-16</date>
     <license uri="http://www.php.net/license">PHP License</license>
     <notes>
apply fix for the crash problem when working with PDO interface with flag PDO::ATTR_PERSISTENT=>false.
avoid redirect when ssl is false. Other performance improvement and refactor.
     </notes>
   </release>
   <release>
    <version>
    <release>1.0.2</release>
    <api>1.0.2</api>
    </version>
    <stability>
      <release>stable</release>
      <api>stable</api>
    </stability>
   <date>2019-11-20</date>
   <license uri="http://www.php.net/license">PHP License</license>
   <notes>
apply fix for database null/empty problem change in https://github.com/php/php-src/pull/4340 in MYSQLND_METHOD(mysqlnd_conn_data, connect) to MYSQLND_METHOD(mysqlnd_azure_data, connect)
   </notes>
  </release>
  <release>
   <version>
    <release>1.0.1</release>
    <api>1.0.1</api>
   </version>
   <stability>
    <release>stable</release>
    <api>stable</api>
   </stability>
   <date>2019-11-01</date>
   <license uri="http://www.php.net/license">PHP License</license>
   <notes>
Update package folder name for pecl install, and README.md
   </notes>
  </release>
  <release>
   <version>
    <release>1.0.0</release>
    <api>1.0.0</api>
   </version>
   <stability>
    <release>stable</release>
    <api>stable</api>
   </stability>
   <date>2019-10-17</date>
   <license uri="http://www.php.net/license">PHP License</license>
   <notes>
Initial package release.
   </notes>
  </release>
 </changelog>
</package>
